diff -u -r1.1 TCPReno.cc
--- TCPReno.cc	4 Aug 2005 10:49:09 -0000	1.1
+++ TCPReno.cc	29 Nov 2005 00:19:20 -0000
@@ -49,8 +49,8 @@
     tcpEV << "Begin Slow Start: resetting cwnd to " << state->snd_cwnd
           << ", ssthresh=" << state->ssthresh << "\n";
 
-    // Reno retransmits all data (unlike Tahoe which transmits only the segment)
-    conn->retransmitData();
+    // retransmit one segment at the front of the queue
+    conn->retransmitOneSegment();  // 20051129 (3)
 }
 
 void TCPReno::receivedDataAck(uint32 firstSeqAcked)
@@ -132,8 +132,9 @@
         conn->retransmitOneSegment();
 
         // enter slow start
+        // "set cwnd to ssthresh plus 3 times the segment size." (rfc 2001)
         recalculateSlowStartThreshold();
-        state->snd_cwnd = 3*state->snd_mss;  // note: in Tahoe we used one MSS not 3 (=dupacks)
+        state->snd_cwnd = state->ssthresh + 3*state->snd_mss;  // 20051129 (1)
         if (cwndVector) cwndVector->record(state->snd_cwnd);
 
         tcpEV << "set cwnd=" << state->snd_cwnd << ", ssthresh=" << state->ssthresh << "\n";
@@ -155,6 +156,9 @@
         state->snd_cwnd += state->snd_mss;
         tcpEV << "Reno on dupAck>3: Fast Recovery: inflating cwnd by MSS, new cwnd=" << state->snd_cwnd << "\n";
         if (cwndVector) cwndVector->record(state->snd_cwnd);
+
+        // cwnd increased, try sending
+        sendData();  // 20051129 (2)
     }
 }
 
