<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" type="text/css" href="../../samples.css">
	<title>Data Link Visualization Example</title>

</head>

<body>
	<h1><center>Data Link Visualization Example</center></h1>

	<p><h2>Goals</h2></p>

	<p> 
        In complex networks there are a lot of communication between the nodes. It is difficult to ascertain between which nodes there is a second layer link.
        By visualizing data links we can determine the active second layer links in the network easily.
        It is especially helpful if a packet doesn't reach the destination node. In this case we can see at a glance where the communication is jammed.
    </p>
    <p>    
        The example consists of 4 simulation models, each demonstrating different features of data link visualization.
    </p>
        <!--
            Visualizing data links is useful, because based on this we can determine the second layer links in the network.
            Miért jó ez a visualizer?
            problem: Komplex hálózatokban (főleg wireless) nehéz meghatározni, hogy melyik node-ok között van aktív 2. rétegbeli kapcsolat.
            A datalinkVisualizer-rel ránézésre meg tudjuk állapítani, hogy melyek az aktív második rétegbeli linkek a hálózatban.
            Könnyen azonosítani tudjuk a hálózatban lévő adatkapcsolati rétegben létrejött kapcsolatokat.
            Wireless hálózatokban különösen hasznos, mert láthatjuk, hogy melyik eszköz melyik eszköznek küldött vmilyen csomagot.
            Vezetékes kapcsolatoknál is segít, ha pl. egy csomag nem jut el egy állomástól egy másik távoli állomáshoz, 
            akkor könnyedén azonosíthatjuk, hogy hol akad el a csomag.
            A visualizer két szomszédos eszköz között működik, így lépésről-lépésre követhetjük a csomag útvonalát.

            Mit mutat be a sample?
            A sample-ön belül 4 szimulációt találunk, egyre bonyolultabbakat. Mindegyikben különböző funkciókat mutatunk be.         
        -->
	
    <p><h2>About the visualizer</h2></p>
    
    <p> 
        The <var>DatalinkVisualizer</var> keeps track of active data links in a network.
        A link becomes active between two nodes when a packet arrives at the receiver node's data link layer from the source node's data link layer.
        By default links are not displayed, we can enable their visualization by switching the <i>displayLinks</i> parameter to true.
    </p>   
    <p> 
        The links are represented visually by solid arrows.
        The arrow's starting point is the sender node and its endpoint is the receiver node.
        The visualizer has filtering parameters, like <i>nodeFilter</i>, <i>interfaceFilter</i> and <i>packetFilter</i>.
        Using these we can specify which data links are shown. By default all nodes, all interfaces and all packets are considered for displaying data links.
        It is possible to use logical expressions as the filter's parameter, e.g <i>packetFilter = "ping* or tcp*"</i> shows the ping and the tcp data links.
    </p>
        
        <!--
            Mi ez a visualizer?
            A datalinkVisualizer-rel nyilvántarthatjuk az aktív kapcsolatokat a hálózatunkban.
            Akkor alakul ki link két eszköz között, amikor egy csomag az egyik eszköz adatkapcs. rétegétől a másik eszköz adatkapcs. rétegébe érkezik.
            A kapcsolatokat folyamatos nyilak reprezentálják.
            Szűrni tudjuk, hogy milyen típusú csomagok esetén figyelje a link kialakulását.
            A linkVisualizer leszármazottja, ebből adódóan az összes ilyen tulajdonságát testreszabhatjuk, mint pl. nyíl típusa, packet/nodefilter...
            Több visualizer-t is elhelyezhetünk a szimulációban, ezzel jobban áttekinthetővé téve az adatkapcsolati rétegben létrejött kapcsolatokat.
        -->

	<p><h2>Enabling data links in wired and wireless network</h2></p>

    <p>
        In this configuration we show how to enable the visualization's default look.
        We visualize data links both in a wired and in a wireless network.
    </p>
    <p>
        The wired network contains two <var>Standardhosts</var>, an <var>IPv4NetworkConfigurator</var> module and a <var>DataLinkVisualizer</var> module.
        In wireless network the type of the hosts is <var>AdhocHost</var> and there is an additional <var>Ieee80211ScalarRadioMedium</var> module.
        TODO: 1 mondatban, hogy mit csinal a configurator, visualizer, radiomedium
    </p>
    <p align="center">
        <img width=600 src="DatalinkVisualizerWiredSimple.png">
    </p>
    <p align="center">
        <img width=600 src="DatalinkVisualizerWirelessSimple.png">
    </p>    
    <p>
        In both configurations the source host pings the destination host:
        <div class="snippet">
            *.wiredSource.numPingApps = 1<br>
            *.wiredSource.pingApp[0].destAddr = "wiredDestination"
        </div>
        <div class="snippet">
            *.wirelessSource.numPingApps = 1<br>
            *.wirelessSource.pingApp[0].destAddr = "wirelessDestination"
        </div>
        An additional line of code enables the <var>DatalinkVisualizer</var>.
        <div class="snippet">
            *.linkVisualizer.*.displayLinks = true
        </div>
        All other parameters are left on their default.
    </p>
    <p>
        When we start the simulation, here is what happens:
    </p>
    <p align="center">
        <video autoplay loop controls onclick="this.paused ? this.play() : this.pause();" width=618 height=216 src="DatalinkVisualizerWiredSimple.mp4">
    </p>
    <p align="center">
        <video autoplay loop controls onclick="this.paused ? this.play() : this.pause();" width=618 height=298 src="DatalinkVisualizerWirelessSimple.mp4">
    </p>
    <p>
        The communication starts between the nodes.
        When a message reaches its destination's data link layer, the data link is activated between the nodes and an arrow is shown pointing from the sender towards the receiver.
        Then the arrow fades out in real time.
    </p>
        <!--
            Mit csinálunk / mi a sample célja?
                Ebben a példában megmutatjuk hogy kell bekapcsolni a visualizer-t
                A default kinézetét fogjuk látni
                Egy wired és egy wireless példán keresztül is megmutatjuk a vizualizációt
                
            Mi a konfig?
                Ez a network végig ugyanaz marad
                2 wreless host, 2 wired host
                wirelessSource a wirelessDestination-t pingeli, ugyanez a wired-nél
                bekapcsoljuk a visualizert
                default paramétereket használjuk

            Mi az eredmény?
                gif
                megjelenítődnek az összes datalinkek
                valós időben elhalványulnak
        -->

   
    <p><h2>Data link visualization in a complex network</h2></p>

    <p>
        This configuration demonstrates the visualization of data links in a complex network.
        In this simulation we also show how the <i>packetFilter</i> works.
        Here is the network for this configuration:
    </p>
    <p align="center">
        <img width=600 src="DatalinkVisualizerComplex.png">
    </p>
    <p>
        The network has an <var>IPv4NetworkConfigurator</var> module and an <var>IntegratedVisualizer</var> module.
        The topology consists of four switches and four endpoints: two source hosts and two destination hosts.
        The sources ping the destinations.
        The visualization of data links is enabled, but it is filtered. Links are displayed only if a ping message is sent.
        We adjust the <i>fadeOutMode</i> and the <i>fadeOutTime</i> parameters, so the data links don't fade out before the next ping messages aren't sent.
        Here is the configuration:
        <div class="snippet">
            # Application parameters<br>
            *.source*.numPingApps = 1<br>
            <br>
            *.source1.pingApp[0].destAddr = "destination1"<br>
            *.source2.pingApp[0].destAddr = "destination2"<br>
            <br>
            # Visualizer parameters<br>
            *.visualizer.*.dataLinkVisualizer.displayLinks = true<br>
            *.visualizer.*.dataLinkVisualizer.fadeOutMode = "simulationTime"<br>
            *.visualizer.*.dataLinkVisualizer.fadeOutTime = 1.4s<br>
            *.visualizer.*.dataLinkVisualizer.packetFilter = "ping*"<br>
        </div>
    </p>
    <p>
        The following animation shows what happens when we start the simulation:
    </p>
    <p align="center">        
        <video autoplay loop controls onclick="this.paused ? this.play() : this.pause();" width=830 height=546 src="DatalinkVisualizerComplex.mp4">
    </p>
    <p>
        Only ping messages activate the visualization of data links between the nodes, because of the <i>packetFilter</i>.
        The visualized data links are represented by solid arrows.
        The arrows start to fade out in simulation time, but they don't disappear completely, because the fadeOutTime is greater than the sending interval of ping messages.
        Only one data link can be activated per direction between the nodes.
        If a data link is visualized already between two nodes and another packet activates a data link between the same nodes, the arrow between those nodes is only reinforced.
    </p>
    <p align="center">        
        <video autoplay loop controls onclick="this.paused ? this.play() : this.pause();" width=830 height=546 src="DatalinkVisualizerFadeOut.mp4">
    </p>

    <!--
            Mit csinálunk / mi a sample célja?
                A cél a DatalinkVisualizer működésének bemutatása komplex hálózatban
                Megmutatjuk a szűrő funkció(kat)
                Megmutatjuk, hogy mi történik, ha több csomag is ugyanazok között a pontok között több data link aktiválódik
                
            Mi a konfig?
                A hálózatban 4 switch és 4 host van, amiből kettő source és kettő dest.
                A source-ok pingelik a dest-eket.
                A data linkeket bekapcsoljuk a displayLinks-el.
                Csak a ping data link-jeit mutatjuk meg, használjuk a szűrő funkciót.

            Mi az eredmény?
                gif
                A packetFilter miatt csak a ping üzenetek aktiválják a node-ok között a data linkeket, az ARP üzenetek nem.
                Ezek folytonos nyilakként jelennek meg és a fadeOutTime-nak megfelelő idő alatt elhalványodnak.
                A node-ok között egy irányba csak egy aktív data link aktiválódhat, másik ping üzenet ugyanazt a linket aktiválja újra.
                Ha egy data link már vizualizálva van két node között, akkor egy másik packet csak megerősíteni tudja azt a nyilat
        -->

    <p><h2>Displaying dynamic data links</h2></p>

    <p>
        The goal of this configuration is displaying dynamically changing active data links in a wireless environment.
        Here is the network for this configuration:
    </p>
    <p align="center">
        <img src="DynamicDatalinks.png">
    </p>
    <p>
        The type of all nodes is <var>AODVRouter</var>.
        These ad hoc nodes are placed randomly on the playground and they move also randomly between borders.
        The source node has a ping application, that sends ping messages in every seconds.
        The communication range is reduced to get a non-trivial path between source and destination.
        Here is the configuration:
        <div class="snippet">
            # Application parameters<br>
            *.source.numPingApps = 1<br>
            *.source.pingApp[0].destAddr = "destination"<br>
            <br>
            # mobility parameters<br>
            *.*.mobilityType = "MassMobility"<br>
            *.*.mobility.speed = 8mps<br>
            *.*.mobility.changeAngleBy = uniform(-60deg, 60deg)<br>
            *.*.mobility.changeInterval = exponential(1s)<br>
            *.*.mobility.constraintAreaMinX = 170m<br>
            *.*.mobility.constraintAreaMinY = 40m<br>
            *.*.mobility.constraintAreaMinZ = 0m<br>
            *.*.mobility.constraintAreaMaxX = 570m<br>
            *.*.mobility.constraintAreaMaxY = 470m<br>
            *.*.mobility.constraintAreaMaxZ = 0m<br>
            <br>
            # wlan parameters<br>
            *.*.wlan[*].radio.transmitter.power = 1mW<br>
            <br>
            # Visualizer parameters<br>
            *.visualizer.*.dataLinkVisualizer.displayLinks = true<br>
            *.visualizer.*.dataLinkVisualizer.packetFilter = "ping*"<br>
            *.visualizer.*.dataLinkVisualizer.fadeOutMode = "simulationTime"<br>
            *.visualizer.*.dataLinkVisualizer.fadeOutTime = 1.4s<br>
        </div>
    </p>
    <p>
        The following animation illustrates what happens when the simulation is run: 
    </p>
    <p align="center">        
        <video autoplay loop controls onclick="this.paused ? this.play() : this.pause();" width=582 height=488 src="DatalinkVisualizerDynamic.mp4">
    </p>
    <p>
        The nodes exchange routing informations, then the source starts to ping the destination.
        When a ping message reaches the next node's data link layer, the link is shown between the nodes.
        If the route is changed between the source and the destination new data links are activated.
    </p>
    <!--
            Mit csinálunk / mi a sample célja?
                A cél a dinamikusan felépülő data linkek kirajzolása.
                
            Mi a konfig?
                Az összes node aodvrouter, ezeket raktuk le a playgroundra.
                Van egy source és van egy destination, ping üzenetek mennek, erre szűr a DatalinkVisualizer.
                

            Mi az eredmény?
                gif
                
        -->

<!-- Alcim minta   
    <p><h2>Sample</h2></p>

    <p>
    </p>
-->    

    <p><h2>More information</h2></p>

    <p>
        This example only demonstrated the key features of data link visualization. For more information, refer to the 
<var>DatalinkVisualizer</var> NED documentation.
    </p>

</body>
</html>
