<!DOCTYPE html>

<html>
<head>
<link rel="stylesheet" type="text/css" href="../../samples.css">
<title>Visualizing Submodule Information</title>
</head>

<body>

<h1><center>Visualizing Submodule Information</center></h1>

<h2>Goals</h2>

<p>
Various compound modules in INET contain submodules that display information about their state in the graphical runtime environment.
This is of limited use, since one has to enter the compound modules to see this information. States of important
submodules can be visualized at containing network nodes, at the top level of the network. This makes such information conveniently
available at a glance, without the need to open graphical views or go into compound modules.
This example contains a configuration that demonstrates visualization of nodes' IEEE 802.11 channel access state.
</p>

<h2>About the visualizer</h2>

<p>
The <var>InfoVisualizer</var> module can visualize information of submodules for a network node on the top level canvas.
The submodules can be selected with the visualizer's <var>modules</var> parameter. This parameter takes full path module names.
Wildcards can be used to select a certain submodule in multiple nodes. Additionally, one can specify multiple submodules for a node.
</p>

<p>
The visualizer can display module states in one of two ways, selected with the <var>content</var> parameter.
When set to <i>str</i>, it displays the return value of the module's str() function. When set to <i>displayStringText</i>,
it displays the 't' tag of the submodule's display string. The default is <i>str</i>. TODO: do we need this ?
</p>

<h2>The visualization</h2>

<p>
The network for the simulation is the following:
</p>

<img src="infonetwork.png">

<p>
It contains 3 <var>AdhocHosts</var> arranged in a simple chain. It also contains an <var>IPv4NetworkConfigurator</var>,
an <var>Ieee80211ScalarRadioMedium</var>, and an <var>IntegratedVisualizer</var> module. The communication ranges of hosts
is determined by their radio transmitter power, which is configured so that hosts can only reach adjacent hosts in the chain.
Hosts' routing tables are set up accordingly, thus packets going between <var>source</var> and <var>destination</var> 
are routed via <var>relay</var>.
</p>

<p>
The visualization is enabled by setting the <var>displayInfos</var> parameter to true:
</p>

<p>TODO: include from ini</p>

<p>TODO: currently, the default value for displayInfos is true...it was false with the other visualizers</p>

<p>TODO: parameters should be italic for consistency</p>

<p>
The visualizer is configured to visualize nodes' channel access state. This information is contained in each node's Contention module.
The location of the Contention module is <var>AdhocHost/wlan/mac</var>:
</p>

<div class="snippet">
*.visualizer.*.infoVisualizer.modules = "*.*.wlan[0].mac.ctn[0]"
</div>

<p>
The <var>content</var> parameter is set to display the submodule's display string text:
</p>

<div class="snippet">
*.visualizer.*.infoVisualizer.content = "displayStringText"
</div>

<p>
Additionally, <var>source</var> is configured to send UDP packets to <var>destination</var>.
</p>

<p>
When the simulation is run, the channel access state is displayed above the nodes:
</p>

<img src="accessstate.png">

<p>
The visualization changes to reflect the changes in the access state. It takes on the following values:
</p>

<ul>
<li>IDLE when the node is receiving and doesn't want to transmit</li>
<li>OWNING when the node has the channel, transmitting, or receiving an ACK</li>
<li>IFS+BKOFF when the node has finished transmitting and backing off</li>
<li>DEFER when the node wants to transmit but the channel is in use</li>
</ul>

<p>TODO: do we need this ?</p>

<p>
The handover is displayed on this animation:
</p>

<img src="info1.gif">

<img src="info2.gif">

<p>TODO: what is happening on the animation</p>

<p>
Multiple submodules can be specified with the visualizer's <i>modules</i> parameter.
For example, the UDP application's state can be displayed in addition to the channel access state:
</p>

<div class="snippet">
*.visualizer.*.infoVisualizer.modules = "*.*.wlan[0].mac.ctn[0] *.*.udpApp[0]"
</div>

<p>
This would look like the following:
</p>

<img src="multiplemodules.png">

<p>
Here, the visualizer displays the UDP application's number of sent and received packets.
</p>

<p>TODO: some kind of conclusion like in the other samples</p>

</body>

</html>