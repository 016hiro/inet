%description:
This test compares the INET wireless model against the NS3 wireless model.

This scenario contains 2 adhoc non-QoS client that runs 4 UDP applications.
The server is out of range.

%testprog: opp_run

%inifile: omnetpp.ini

[General]
network = Ns3Test
ned-path = .;../../../../../src;../../lib
include ../../lib/ns3test.ini
sim-time-limit = 1s
**.useFullAckTimeout = true
*.withQos = false
*.numClients = 2
*.numApps = 4
*.serverYPos = 3000m
*.appStartTime = 0.5s
*.appStartDelta = 0.002s # TODO: this is carefully selected to avoid collision that would result in random stream mismatch due to implementation differences
*.sendInterval = 0.0001s

%postrun-command: grep TX: test.out
%postrun-command: pwd ; cd ../../ns3; ./waf --run "examples/wireless/inet-wireless-udp --withQos=false --numClients=2 --numApps=4 --serverYPos=3000 --appStartTime=0.5 --appStartDelta=0.002 --sendInterval=0.0001 --simulationTime=1"
%postrun-command: grep TX: postrun-command\(2\).out
%postrun-command: diff -s postrun-command\(1\).out postrun-command\(3\).out ; echo ""

%contains: postrun-command(4).out
Files postrun-command(1).out and postrun-command(3).out are identical

%contains: postrun-command(1).out
node = 1

%contains: postrun-command(1).out
node = 2

%contains: postrun-command(1).out
ac = NA

%not-contains: postrun-command(1).out
ac = AC_VO

%not-contains: postrun-command(1).out
duration = 44000000